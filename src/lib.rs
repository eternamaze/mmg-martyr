//! # Martyr — 唯一边守卫
//!
//! 令 $G = (V, E)$ 为堆内存有向图，资源 T 占据子图 $S \subseteq G$。
//!
//! **不变量**：从 S 外部进入 S 的边恰好有一条 — Martyr 内的 `*mut T`。
//!
//! ```text
//! Martyr ──*mut T──→ [ T ──→ T.field ──→ ... ]
//!          ↑          └──────── S ────────────┘
//!       唯一边
//! ```
//!
//! 切断唯一边 → S 成为孤立子图 → `Box::from_raw` 回收。
//!
//! ## 安全性
//!
//! | 威胁 | 防御 |
//! |------|------|
//! | 引用逃逸 | HRTB `for<'a>` — 闭包无法捕获内部引用 |
//! | 并发竞争 | `RwLock` 读写互斥 |
//! | 悬垂指针 | `kill()` 先置空再释放 |
//! | 子图泄露 | T 的设计契约（计算理论边界） |

mod martyr;

pub use martyr::{Martyr, ResourceKilled};
